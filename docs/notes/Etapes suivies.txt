											---------------------------------------
											 P4L1 - Prj. TomTroc - Etapes suivies
												Date : Samdi 6 décembre 2025
												Maj : Dimanche 14 décembre 2025   
											---------------------------------------
											
1. ANALYSE DU PROJET
	a) Commande sur site OC
	
	b) Spécifications fonctionnelles
	
	c) Maquette et prototype du site 
	
2. INITIALISATION DU PROJET
	BDD : tomtroc
		Relations entre les tables :
		--------------------------
			Voir aussi la représentation ERD (Entity Relation Diagram) sous :
				/docs/architecture/erd_tomtroc.puml

			1. users ↔ books
				Relation : 1 utilisateur possède plusieurs livres (1-N) :
					books.user_id  →  users.id
				Contrainte (suppression en cascade - éviter les données orphelines) :
					CONSTRAINT fk_books_user
						FOREIGN KEY (user_id) REFERENCES users(id)
						ON DELETE CASCADE
	
			2. users ↔ messages (expéditeur)
				Relation : 1 utilisateur peut envoyer plusieurs messages (1-N)	
					messages.sender_id → users.id
					
			3. users ↔ messages (destinataire)
				Relation : 1 utilisateur peut recevoir plusieurs messages (1-N)	
				
				→ Le modèle "messagerie" est donc défini avec deux FK pointant vers la même table users.
	
		Création de BDD : tomtroc
		-------------------------
			CREATE DATABASE IF NOT EXISTS tomtroc
			  CHARACTER SET utf8mb4
			  COLLATE utf8mb4_unicode_ci;

			USE tomtroc;

			CREATE TABLE users (
				id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
				pseudo VARCHAR(50) NOT NULL,
				email VARCHAR(255) NOT NULL,
				password_hash VARCHAR(255) NOT NULL,
				created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
				updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
				CONSTRAINT uq_users_email UNIQUE (email),
				CONSTRAINT uq_users_pseudo UNIQUE (pseudo)
			) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


			CREATE TABLE books (
				id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
				user_id INT UNSIGNED NOT NULL,
				title VARCHAR(255) NOT NULL,
				author VARCHAR(255) NOT NULL,
				description TEXT NOT NULL,
				image_path VARCHAR(255) NULL,
				status ENUM('available', 'unavailable') NOT NULL DEFAULT 'available',
				created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
				updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

				CONSTRAINT fk_books_user
					FOREIGN KEY (user_id) REFERENCES users(id)
					ON DELETE CASCADE,

				INDEX idx_books_user (user_id),
				INDEX idx_books_status (status),
				INDEX idx_books_title (title)
			) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


			CREATE TABLE messages (
				id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
				sender_id INT UNSIGNED NOT NULL,
				receiver_id INT UNSIGNED NOT NULL,
				content TEXT NOT NULL,
				created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
				updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
				read_at DATETIME NULL DEFAULT NULL,

				CONSTRAINT fk_messages_sender
					FOREIGN KEY (sender_id) REFERENCES users(id)
					ON DELETE CASCADE,

				CONSTRAINT fk_messages_receiver
					FOREIGN KEY (receiver_id) REFERENCES users(id)
					ON DELETE CASCADE,

				INDEX idx_messages_receiver_created (receiver_id, created_at),
				INDEX idx_messages_pair (sender_id, receiver_id, created_at)
			) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
	
	
		Git/Gihub :
		---------
			Création de la repo. github : oc-4-1-TomTroc
			
			git init
			git add .
			git commit -m "Initial commit – project structure + SQL schema + base MVC"
			git branch -M main
			git remote add origin https://github.com/toncompte/oc-4-1-TomTroc.git
			git push -u origin main	

3. CREATION/MISE EN PLACE DU SQUELETTE MVC
	- Structure du project
	- Autoloader (spl) (suppression de composer/phpdotenv car non autorisé dans le prj)
	- router
	- front controller
	- Gestion des erreurs (403 / 404 / 500)
	- Système de configuration
	- Rendu MVC
	- Layouts
	- Database manager

	git add .
	git commit -m "feat(core): implement MVC foundation, routing, config system and error handling

	- Added custom autoloader
	- Implemented centralized configuration system (Config class + /config files)
	- Added front controller with global exception handling (DEV/PROD modes)
	- Added HTTP error handling (403, 404, 500) with dedicated views
	- Improved Router to throw HTTP exceptions
	- Added base Controller with render() and renderError() workflows
	- Implemented unified layouts for normal and error views
	- Create & Updated Database manager to use config system
	- Clean project structure and prepared foundation for feature development
	"

4. CRÉATION DS FEATURES

	1) FEATURE AUTH
	===============

		BRANCHE
		-------
			git checkout -b feature/auth

		OBJECTIF
		--------
			Implémenter un système complet d'authentification :
				- Session sécurisée
				- Inscription
				- Connexion
				- Déconnexion
				- Page Mon Compte
				- Gestion des erreurs et messages flash

		A) SESSION
		----------
			Ajout /app/Core/Session.php
			Adaptation du front-controller (public/index.php)

			PRINCIPE DE FONCTIONNEMENT
			--------------------------
				• Connexion réussie :
					Session::set('user_id', $user->getId());
					Session::addFlash('success', 'Connexion réussie.');

				• Vérification d'accès :
					if (! Session::isLogged()) {
						throw new HttpForbiddenException(
							'Vous devez être connecté pour accéder à cette page.'
						);
					}

				• Déconnexion :
					Session::destroy();

				• Messages flash dans le layout :
					$success = Session::getFlashes('success');
					$errors  = Session::getFlashes('error');

		B) AUTHENTIFICATION
		-------------------
			1. Modèle User : app/Models/User.php
				Roles du modèle :
					(1) Représenter les données venant de la BDD (hydratation)
					(2) Représenter les données venant du formulaire (front)
				Workflow MVC :
					Front → Controller → Validation → User (modèle) → Repository → BDD
					BDD   → Repository → User (modèle) → Controller → Vue

			2. UserRepository : app/Repositories/UserRepository.php
				- findByEmail()
				- findByPseudo()
				- findById()
				- create()
				- verifyCredentials()
				- hydrateUser()

			3. AuthController : app/Controllers/AuthController.php
				- registerForm()
				- register()
				- loginForm()
				- login()
				- logout()

			4. Vues :
				views/auth/register.php
				views/auth/login.php

			5. Ajout des routes :
				GET  /register
				POST /register
				GET  /login
				POST /login
				GET  /logout

		C) COMPTE UTILISATEUR
		---------------------
			Contrôleur :
				app/Controllers/AccountController.php

			Vue :
				views/account/index.php

			Nouvelle route :
				GET /account   (accès restreint)

		D) VERSIONING GIT/GITHUB
		------------------------
			git status
			git add .
			git commit -m "feat(auth): implement full authentication module

			- Added AuthController (register/login/logout)
			- Added AccountController and /account protected page
			- Added register and login views (flash + old values)
			- Extended Session with flash system + getUserId()
			- Added User model (pseudo, email, passwordHash)
			- Added UserRepository (find, create, credentials)
			- Added routes + access control via HttpForbiddenException
			"

			git push origin feature/auth

			Sur GitHub :
				- Créer la Pull Request
				- Rédiger titre + description
				- Merger
				- Supprimer la branche distante

			En local :
				git checkout main
				git pull
				git branch -d feature/auth

	2) FEATURE BOOKS
	================

		BRANCHE
		-------
			git checkout -b feature/books

		OBJECTIF
		--------
			Implémenter la gestion complète des livres :
				- Ajout d’un livre par un utilisateur connecté
				- Modification et suppression de ses propres livres
				- Consultation publique des livres
				- Affichage des livres de l’utilisateur dans "Mon compte"
				- Gestion de l’upload d’image
				- Affichage des derniers livres sur la page d’accueil

		A) ENTITE BOOK
		--------------
			Fichier :
				app/Models/Book.php

			Rôle du modèle :
				(1) Représenter un livre issu de la BDD (hydratation)
				(2) Représenter un livre en cours de création/modification (formulaire)
				(3) Porter les règles métier simples (statut, setters sécurisés)

			Champs principaux :
				- id
				- user_id (propriétaire)
				- title
				- author
				- description
				- image_path
				- status
				- created_at / updated_at (gérés par la BDD)

			Workflow MVC :
				Front → Controller → Validation → Book (modèle) → Repository → BDD
				BDD   → Repository → Book (modèle) → Controller → Vue

		B) PERSISTANCE (BOOK REPOSITORY)
		--------------------------------
			Fichier :
				app/Repositories/BookRepository.php

			Méthodes :
				- findById()
				- findByUser()
				- findAvailable()
				- findLast()
				- create()
				- update()
				- delete()
				- hydrateBook()

			Responsabilité :
				- Accès à la base de données uniquement
				- Aucune logique HTTP
				- Aucune logique de session

		C) CONTROLEUR BOOK
		------------------
			Fichier :
				app/Controllers/BookController.php

			Méthodes :
				- show()       → affichage public du détail d’un livre
				- addForm()    → formulaire d’ajout (accès restreint)
				- add()        → traitement ajout + upload image
				- editForm()   → formulaire d’édition (propriétaire uniquement)
				- edit()       → traitement modification
				- delete()     → suppression d’un livre

			Règles de sécurité :
				- Utilisateur connecté requis pour add / edit / delete
				- Vérification du propriétaire du livre
				- Exceptions HTTP (403 / 404) en cas d’erreur

		D) UPLOAD DES IMAGES
		-------------------
			Dossier :
				public/uploads/books/

			Principe :
				- Image optionnelle
				- Validation du type MIME
				- Nom de fichier unique (uniqid)
				- Stockage du chemin relatif en BDD
				- Une seule image haute résolution (x4)
				- Redimensionnement via CSS selon la page

		E) VUES BOOK
		------------
			Dossier :
				views/book/

			Fichiers :
				- add.php   → formulaire ajout
				- edit.php  → formulaire édition
				- show.php  → détail public d’un livre

			Règle :
				- Aucune logique métier
				- Affichage uniquement

		F) INTEGRATION DANS LE COMPTE UTILISATEUR
		-----------------------------------------
			Contrôleur :
				app/Controllers/AccountController.php

			Adaptation :
				- Récupération des livres du user connecté
				- Affichage dans la section "Ma bibliothèque"

			Vue :
				views/account/index.php
					- Liste des livres
					- Boutons Modifier / Supprimer
					- Lien Ajouter un livre

		G) PAGE D’ACCUEIL
		-----------------
			Objectif :
				- Afficher les derniers livres ajoutés

			Implémentation :
				- BookRepository::findLast()
				- Appel depuis HomeController
				- Affichage dans la vue home/index.php

		H) ROUTES
		---------
			$router->get('/book/{id}', [BookController::class, 'show']);

			$router->get('/book/add', [BookController::class, 'addForm']);
			$router->post('/book/add', [BookController::class, 'add']);

			$router->get('/book/{id}/edit', [BookController::class, 'editForm']);
			$router->post('/book/{id}/edit', [BookController::class, 'edit']);

			$router->post('/book/{id}/delete', [BookController::class, 'delete']);

		I) VERSIONING GIT / GITHUB
		--------------------------
			git status
			git add .
			git commit -m "feat(books): implement book CRUD with image upload and home listing

			- Added Book model and BookRepository
			- Added BookController (CRUD + access control)
			- Implemented image upload for books
			- Integrated user books into account page
			- Added public book detail page
			- Displayed last books on home page
			"

			git push origin feature/books

			Sur GitHub :
				- Créer la Pull Request
				- Rédiger titre + description
				- Merger
				- Supprimer la branche distante

			En local :
				git checkout main
				git pull
				git branch -d feature/books
				git branch
				git branch -r


	3) FEATURE BOOKS-PUBLIC
	======================

		BRANCHE
		-------
			git checkout -b feature/books-public

		OBJECTIF
		--------
			Implémenter la consultation publique des livres :
				- Page "Nos livres à l’échange"
				- Recherche par titre
				- Accès au détail d’un livre
				- Navigation publique sans authentification
				- Séparation claire livres publics / espace utilisateur

		A) PAGE PUBLIQUE "NOS LIVRES À L’ÉCHANGE"
		----------------------------------------
			URL :
				GET /books

			Rôle :
				- Afficher la liste des livres disponibles à l’échange
				- Permettre une recherche par titre
				- Donner accès à la page de détail d’un livre

			Implémentation :
				- BookController::index()
				- Transmission des données à la vue book/index.php

			Fonctionnalités :
				- Récupération des livres avec statut "available"
				- Filtrage optionnel via paramètre GET ?q=
				- Affichage de l’image, du titre, de l’auteur
				- Lien vers le détail du livre

		B) ADAPTATION DU BOOK CONTROLLER
		--------------------------------
			Fichier :
				app/Controllers/BookController.php

			Méthodes concernées :
				- index()   → page publique /books
				- show()    → détail public d’un livre

			Responsabilités :
				- Récupérer les paramètres HTTP (GET)
				- Appeler le repository
				- Aucune logique métier
				- Aucune logique SQL

		C) ADAPTATION DU BOOK REPOSITORY
		--------------------------------
			Fichier :
				app/Repositories/BookRepository.php

			Nouvelles / adaptations de méthodes :
				- findAllAvailable(?string $search = null)

			Rôle :
				- Retourner uniquement les livres disponibles
				- Appliquer un filtre de recherche si présent
				- Ne jamais dépendre du HTTP ou de la session

			Règle :
				- Toute logique SQL reste confinée au repository

		D) VUE BOOK INDEX
		-----------------
			Fichier :
				views/book/index.php

			Responsabilité :
				- Affichage uniquement
				- Aucune logique métier
				- Aucune requête SQL

			Contenu :
				- Formulaire de recherche (GET)
				- Liste des livres disponibles
				- Image cliquable menant au détail
				- Message si aucun résultat

		E) PAGE "DÉTAIL D’UN LIVRE"
		---------------------------
			URL :
				GET /book/{id}

			Implémentation :
				- BookController::show()
				- Vue : views/book/show.php

			Fonction :
				- Affichage public des informations complètes du livre
				- Image en grand format
				- Titre, auteur, description
				- Propriétaire du livre

			Accès :
				- Public (aucune authentification requise)

		F) ROUTES PUBLIQUES
		-------------------
			Fichier :
				app/Routes/web.php

			Routes ajoutées / utilisées :
				$router->get('/books', [BookController::class, 'index']);
				$router->get('/book/{id}', [BookController::class, 'show']);

			Principe :
				- Routes isolées dans un fichier dédié
				- Aucune logique métier dans les routes

		G) ADAPTATIONS TRANSVERSES
		--------------------------
			Corrections / ajustements :
				- Amélioration de certaines vues existantes
				- Harmonisation des liens de navigation
				- Ajustements mineurs de repositories
				- Sécurisation de l’affichage (htmlspecialchars)

		H) VERSIONING GIT / GITHUB
		--------------------------
			git status
			git add .
			git commit -m "feat(books-public): public books listing with search and book detail links"

			git push origin feature/books-public

			Sur GitHub :
				- Créer la Pull Request
				- Rédiger titre + description
				- Merger dans main
				- Supprimer la branche distante

			En local :
				git checkout main
				git pull
				git branch -d feature/books-public
				git branch
				git branch -r
			

	4) FEATURE MESSAGING
	====================			

		BRANCHE
		-------
			git checkout -b feature/messaging	
			# supprime localement toutes les références distantes qui n’existent plus sur le remote :
			git fetch --prune
			git branch -r

		OBJECTIF
		--------
			Implémenter un système de messagerie interne entre utilisateurs :
				- Boîte de réception
				- Fil de discussion entre deux utilisateurs
				- Envoi de messages
				- Accès restreint aux utilisateurs connectés
				- Préparer les futures fonctionnalités sociales
				- Compléter la navigation globale du site

		A) ENTITE MESSAGE
		-----------------
			Fichier :
				app/Models/Message.php

			Rôle du modèle :
				- Représenter un message échangé entre deux utilisateurs
				- Contenir uniquement les données métier
				- Ne contenir aucune logique HTTP ou SQL

			Champs principaux :
				- id
				- sender_id
				- receiver_id
				- content
				- created_at
				- read_at

			Règle :
				- Le modèle Message est une entité métier pure

		B) PERSISTANCE (MESSAGE REPOSITORY)
		-----------------------------------
			Fichier :
				app/Repositories/MessageRepository.php

			Méthodes prévues :
				- findInboxByUser(int $userId)
				- findThread(int $userId, int $otherUserId)
				- create(Message $message)
				- markAsRead(int $messageId)

			Responsabilité :
				- Accès à la base de données uniquement
				- Aucune logique HTTP
				- Aucune gestion de session

		C) CONTROLEUR MESSAGE
		---------------------
			Fichier :
				app/Controllers/MessageController.php

			Méthodes :
				- inbox()   → affichage de la boîte de réception
				- thread()  → affichage d’une discussion entre deux utilisateurs
				- send()    → envoi d’un message

			Règles de sécurité :
				- Utilisateur connecté requis
				- Interdiction d’accéder à des conversations tierces
				- Exceptions HTTP (403 / 404) en cas d’erreur

		D) VUES MESSAGERIE
		------------------
			Dossier :
				views/messages/

			Fichiers :
				- inbox.php   → liste des conversations
				- thread.php  → fil de discussion

			Règle :
				- Affichage uniquement
				- Aucune logique métier
				- Aucune requête SQL

		E) BIBLIOTHEQUE PUBLIQUE D’UN UTILISATEUR
		-----------------------------------------
			Objectif :
				- Permettre la consultation publique du profil d’un utilisateur
				- Afficher sa bibliothèque publique (livres disponibles)

			Route :
				GET /users/{id}

			Implémentation :
				- Controller : app/Controllers/UserController.php
				- Méthode : show(int $id)

			Vue :
				views/users/show.php

			Accès :
				- Public
				- Aucune authentification requise

		F) STRUCTURATION DU LAYOUT (HEADER / FOOTER)
		---------------------------------------------
			Objectif :
				- Centraliser la navigation globale
				- Préparer l’intégration complète du site

			Actions :
				- Début d’implémentation d’un header commun
				- Ajout d’un footer global
				- Centralisation des liens principaux :
					- Accueil
					- Nos livres
					- Mon compte
					- Messagerie
					- Mentions légales
					- Politique de confidentialité

		G) PAGES LEGALES
		----------------
			Routes ajoutées :
				GET /legal
				GET /privacy

			Controller :
				app/Controllers/PageController.php

			Vues :
				- views/pages/legal.php
				- views/pages/privacy.php

			Rôle :
				- Pages institutionnelles statiques
				- Aucune logique métier

		H) ROUTES
		---------
			Fichier :
				app/Routes/web.php

			Routes ajoutées :
				$router->get('/messages', [MessageController::class, 'inbox']);
				$router->get('/messages/{userId}', [MessageController::class, 'thread']);
				$router->post('/messages/send', [MessageController::class, 'send']);

				$router->get('/users/{id}', [UserController::class, 'show']);

				$router->get('/legal', [PageController::class, 'legal']);
				$router->get('/privacy', [PageController::class, 'privacy']);

		I) VERSIONING GIT / GITHUB
		--------------------------
			git status
			git add .
			git commit -m "feat(messaging): implement user messaging and public profiles

			- Added Message model, repository and controller
			- Implemented inbox and message threads
			- Added public user profile with book listing
			- Added global header and footer structure
			- Added legal and privacy pages
			"

			git push origin feature/messaging

			Sur GitHub :
				- Créer la Pull Request
				- Rédiger titre + description
				- Merger dans main
				- Supprimer la branche distante

			En local :
				git checkout main
				git pull
				git branch -d feature/messaging
				git branch
				git branch -r


    5) FEATURE UI-STRUCTURE
    =======================

        BRANCHE
        -------
            git checkout -b feature/ui-structure
            # Nettoie les références distantes supprimées
            git fetch --prune
            git branch
            git branch -r

        OBJECTIF
        --------
            Structurer l’interface globale du site pour coller à la maquette :
                - Layout cohérent (header + footer) sur toutes les pages
                - Page d’accueil complète (sections maquette)
                - Harmonisation UI des pages auth (login/register) avec image
                - Intégration progressive des items HTML (structure, classes CSS)
                - Ajustements UI sur messagerie et profils publics
                - Consolidation de la gestion d’avatar (affichage + upload)

        A) STRUCTURE GLOBALE (LAYOUT)
        -----------------------------
            Fichier :
                views/layout.php  (ou layout principal utilisé par Controller::render)

            Objectif :
                - Header et footer présents partout
                - Navigation stable et future-proof (CSS à venir)

            Contenu header :
                - Logo TomTroc (lien vers /)
                - Liens :
                    - Accueil (/)
                    - Nos livres à l’échange (/books)
                    - Messagerie (/messages) (si connecté)
                    - Mon compte (/account) (si connecté)
                    - Connexion (/login) (si non connecté)
                    - Inscription (/register) (si non connecté)

            Contenu footer :
                - Politique de confidentialité (/privacy)
                - Mentions légales (/legal)
                - TomTroc©

            Règle :
                - HTML uniquement (pas de logique métier)
                - Les conditions d’affichage (connecté/non) restent simples et lisibles

        B) PAGE D’ACCUEIL (HOME)
        ------------------------
            Fichiers :
                app/Controllers/HomeController.php
                views/home/index.php

            Structure attendue (maquette) :
                HOME
                ├─ Hero
                │  ├─ Texte (gauche)
                │  └─ Image (droite + crédit)
                │
                ├─ Derniers livres ajoutés
                │  ├─ Grille 4 livres (données depuis BookRepository::findLast)
                │  └─ Bouton "Voir tous les livres" (lien /books)
                │
                ├─ Comment ça marche ?
                │  ├─ Texte intro
                │  └─ 4 étapes
                │
                ├─ Bandeau image pleine largeur
                │
                ├─ Nos valeurs
                │  ├─ Texte
                │  └─ Illustration cœur (svg/png)

            Règles :
                - Respect du HTML sémantique
                - Préparation CSS : classes dédiées par bloc (home-hero, home-last, etc.)
                - Images : chemins stables dans /public/assets/...

        C) PAGES AUTH (REGISTER / LOGIN) AVEC IMAGE
        -------------------------------------------
            Fichiers :
                views/auth/register.php
                views/auth/login.php

            Objectif :
                - Préparer la mise en page 2 colonnes (form à gauche, image à droite)
                - Intégrer l’image de fond/hero dans la structure HTML (sans CSS ici)

            Image :
                /assets/images/home/hero-banner.png  (ou image de la maquette)

            Règle :
                - Aucun élément supprimé
                - Ajout de wrappers / classes CSS (auth-layout, auth-form, auth-media)

        D) PROFIL PUBLIC UTILISATEUR (UI TABLE)
        ---------------------------------------
            Fichier :
                views/users/show.php

            Objectif :
                - Layout proche maquette (profil à gauche, liste à droite)
                - Liste sous forme de colonnes :
                    PHOTO | TITRE | AUTEUR | DESCRIPTION
                - Description tronquée (83 caractères + "…")

            Règle :
                - Structure CSS-ready (library-header, library-row, col-*)

        E) ADAPTATION MESSAGERIE (UI + ROUTES)
        --------------------------------------
            Fichiers :
                app/Controllers/MessageController.php
                views/messages/inbox.php
                views/messages/thread.php
                app/Routes/web.php

            Objectif :
                - Harmoniser les liens (header) vers la messagerie
                - Ajuster les vues pour coller au layout global (header/footer)
                - Corriger/homogénéiser les routes si nécessaire :
                    - /messages
                    - /messages/{userId}
                    - /messages/send

            Règle :
                - UI seulement (structure + classes)
                - Pas de logique SQL dans les vues

        F) GESTION AVATAR (UI + AFFICHAGE)
        ----------------------------------
            Fichiers typiques :
                app/Core/AvatarUploader.php
                app/Controllers/AccountController.php
                app/Controllers/AuthController.php
                views/account/index.php
                views/users/show.php
                views/messages/* (si avatar affiché)

            Objectif :
                - S’assurer que l’avatar est :
                    - affiché correctement (public + privé)
                    - mis à jour proprement (upload, remplacement, suppression ancien)
                - Unifier les chemins d’images / conventions (avatar par défaut, etc.)

            Règle :
                - Cohérence des chemins (basename stocké, chemin reconstruit au rendu)
                - Sécurité minimale (extensions, taille, move_uploaded_file)

        G) INCLUSION PROGRESSIVE DES "ITEMS" (HTML ONLY)
        ------------------------------------------------
            Objectif :
                - Poser la structure HTML des composants (boutons, cards, sections)
                - Ajouter les classes nécessaires pour reproduire la maquette plus tard

            Exemples :
                - Cards livre (miniature + titre + auteur + vendeur)
                - Boutons primaires/secondaires (classes stables)
                - Sections de page (wrappers + containers)

            Règle :
                - Pas de CSS inline
                - Pas de suppression d’éléments fonctionnels
                - HTML lisible + sémantique + stable

        H) ROUTES
        ---------
            Fichier :
                app/Routes/web.php

            Vérifications :
                - Liens header/footer cohérents avec routes existantes :
                    GET  /           (home)
                    GET  /books       (bibliothèque publique)
                    GET  /book/{id}   (détail livre)
                    GET  /login
                    GET  /register
                    GET  /account     (privé)
                    GET  /messages    (privé)
                    GET  /privacy
                    GET  /legal

        I) VERSIONING GIT / GITHUB
        --------------------------
            git status
            git add .
            git commit -m "feat(ui): structure layout and home page sections

            - Added global header/footer structure in layout
            - Structured home page blocks to match the mockup
            - Updated auth views to include media column (HTML structure)
            - Improved public user profile layout (columns + trimmed description)
            - Harmonized navigation links across views
            - Adjusted messaging views/routes for UI consistency
            - Consolidated avatar display/update integration
            "

            git push origin feature/ui-structure

            Sur GitHub :
                - Créer la Pull Request
                - Rédiger titre + description
                - Merger dans main
                - Supprimer la branche distante

            En local :
                git checkout main
                git pull
                git branch -d feature/ui-structure
                git branch
                git branch -r
	

	6) FEATURE FIGMA-INTEGRATION
	===========================

		BRANCHE
		-------
			git checkout -b feature/figma-integration
			# Nettoie les références distantes supprimées
			git fetch --prune
			git branch
			git branch -r

		OBJECTIF
		--------
			Démarrer l’intégration visuelle de la maquette Figma
			tout en consolidant le backend existant :

				- Corriger les derniers bugs PHP identifiés
				- Poser les bases CSS globales du projet
				- Intégrer fidèlement les premières pages de la maquette
				- Préparer une approche progressive page par page

		A) STABILISATION BACKEND
		------------------------
			Objectif :
				- S’assurer que toutes les fonctionnalités existantes
				sont stables avant l’intégration graphique

			Actions réalisées :
				- Corrections de bugs PHP résiduels
				- Ajustements mineurs de contrôleurs / repositories
				- Vérification des routes et flux principaux
				- Sécurisation de certains affichages (htmlspecialchars)

			Règle :
				- Aucun ajout fonctionnel majeur
				- Priorité à la fiabilité avant le CSS

		B) INTEGRATION DU LAYOUT GLOBAL (FIGMA)
		---------------------------------------
			Fichiers concernés :
				- views/layout.php
				- assets/css (nouveaux fichiers CSS)

			Objectif :
				- Intégrer le header et le footer selon la maquette Figma
				- Rendre la navigation cohérente sur toutes les pages

			Header :
				- Logo TomTroc
				- Menu principal (desktop + mobile)
				- Bouton burger (accessibilité ARIA)
				- Liens conditionnels (connecté / non connecté)

			Footer :
				- Liens légaux
				- Copyright
				- Structure prête pour extension

			Règle :
				- HTML + CSS uniquement
				- Pas de logique métier ajoutée
				- Respect strict de la structure Figma

		C) PAGE D’ACCUEIL (HOME) – INTEGRATION FIGMA
		--------------------------------------------
			Fichiers :
				- views/home/index.php
				- assets/css/pages.css 

			Objectif :
				- Intégrer la page d’accueil selon la maquette Figma
				- Respecter la hiérarchie visuelle et les espacements

			Sections intégrées :
				- Hero (texte + image)
				- Derniers livres
				- Comment ça marche
				- Bandeaux visuels
				- Nos valeurs

			Responsive pris en compte :
				- Desktop
				- 1024 px
				- 768 px
				- 377 px (mobile)

			Règle :
				- Mobile-first ou approche progressive
				- Images optimisées (webp)
				- Classes CSS cohérentes et réutilisables

		D) APPROCHE D’INTEGRATION PROGRESSIVE
		-------------------------------------
			Principe :
				- Une feature = une zone de la maquette
				- Une branche par grande page ou section

			Avantage :
				- Historique Git clair
				- Relectures ciblées
				- Risque limité par itération

			Prochaine étape prévue :
				- Intégration de la page "Nos livres à l’échange"

		E) PREPARATION DES BRANCHES SUIVANTES
		-------------------------------------
			Branche suivante :
				feature/figma-books-index

			Objectif de la prochaine branche :
				- Intégration complète de la page /books
				- Grille de livres (desktop + responsive)
				- Recherche visuelle
				- Cartes livre conformes à Figma

		F) VERSIONING GIT / GITHUB
		--------------------------
			git status
			git add .
			git commit -m "feat(figma): start figma integration and stabilize backend

			- Fixed remaining backend bugs
			- Integrated global header and footer from Figma
			- Implemented home page layout (desktop + responsive)
			- Added base CSS structure for future pages
			- Prepared progressive Figma-driven workflow
			"

			git push origin feature/figma-integration

			Sur GitHub :
				- Créer la Pull Request
				- Rédiger titre + description
				- Merger dans main
				- Supprimer la branche distante

			En local :
				git checkout main
				git pull
				git branch -d feature/figma-integration
				git branch
				git branch -r


	7) FEATURE FIGMA-INTEGRATION
	===========================

		BRANCHE
		-------
			git checkout -b feature/figma-books-index
			# Nettoie les références distantes supprimées
			git fetch --prune
			git branch
			git branch -r

	7) FEATURE FIGMA-BOOKS-INDEX
	===========================

		BRANCHE
		-------
			git checkout -b feature/figma-books-index
			# Nettoie les références distantes supprimées
			git fetch --prune
			git branch
			git branch -r

		OBJECTIF
		--------
			Intégrer fidèlement la page publique
			"Nos livres à l’échange" (/books) à partir de la maquette Figma :

				- Intégration HTML/CSS conforme à la maquette
				- Mise en page responsive complète
				- Harmonisation avec les cartes livres déjà utilisées
				- Aucune régression fonctionnelle sur l’existant

		A) PAGE "NOS LIVRES À L’ÉCHANGE" (FIGMA)
		---------------------------------------
			Fichiers :
				- views/book/index.php
				- assets/css/books.css (ou équivalent)

			Objectif :
				- Traduire la maquette Figma en structure HTML/CSS
				- Respecter la hiérarchie visuelle et les espacements

			Contenu :
				- Titre de page
				- Champ de recherche stylé
				- Grille de livres
				- Message si aucun résultat

		B) CARTES LIVRES (COMPONENT)
		-----------------------------
			Principe :
				- Carte livre réutilisable
				- Alignée visuellement avec les cartes de la home

			Contenu d’une carte :
				- Image du livre (ou image par défaut)
				- Titre
				- Auteur
				- Pseudo du propriétaire
				- Badge si livre indisponible

			Règle :
				- Structure HTML stable
				- Classes CSS explicites
				- Aucun CSS inline

		C) GRILLE RESPONSIVE
		--------------------
			Comportement :
				- Desktop large     : 4 colonnes
				- Desktop / laptop  : 3 colonnes
				- Tablette          : 2 colonnes
				- Mobile            : 1 colonne

			Implémentation :
				- CSS Grid ou Flexbox
				- Breakpoints cohérents avec la home

			Règle :
				- Lisibilité prioritaire
				- Images redimensionnées via CSS

		D) CHAMP DE RECHERCHE
		---------------------
			Objectif :
				- Champ visuellement intégré à la maquette
				- Responsive
				- Clair et accessible

			Fonctionnement :
				- Basé sur la logique existante (?q=)
				- Aucun changement backend

			Règle :
				- UI uniquement
				- Pas de logique métier ajoutée

		E) GESTION DES LIVRES INDISPONIBLES
		----------------------------------
			Objectif :
				- Rendre visuellement identifiable un livre indisponible

			Implémentation :
				- Badge ou indicateur visuel
				- Aucune suppression du livre de la liste publique

			Règle :
				- Information claire pour l’utilisateur
				- Pas d’impact fonctionnel

		F) NON-RÉGRESSION
		-----------------
			Vérifications :
				- Page d’accueil inchangée
				- Pages auth intactes
				- Détail livre (/book/{id}) fonctionnel
				- Routes et contrôleurs non modifiés

			Principe :
				- Intégration purement front (HTML/CSS)

		G) VERSIONING GIT / GITHUB
		--------------------------
			git status
			git add .
			git commit -m "feat(books): integrate \"Nos livres à l’échange\" page with responsive layout

			- Figma-faithful HTML/CSS integration of books index page
			- Reusable book card component aligned with home page
			- Responsive grid (4/3/2/1 columns depending on breakpoints)
			- Search input styled and responsive
			- Display unavailable books with visual badge
			- No regression on existing pages
			"

			git push origin feature/figma-books-index

			Sur GitHub :
				- Créer la Pull Request
				- Rédiger titre + description
				- Merger dans main
				- Supprimer la branche distante

			En local :
				git checkout main
				git pull
				git branch -d feature/figma-books-index
				git branch
				git branch -r


	8) FEATURE PAGES LEGALES
	=======================

		BRANCHE
		-------
			git checkout -b feature/figma-legal-pages
			# Nettoie les références distantes supprimées
			git fetch --prune
			git branch
			git branch -r

		OBJECTIF
		--------
			Intégrer les pages légales du site avec une mise en forme cohérente
			avec le reste de l’interface (sans maquette Figma dédiée) :
				- Mentions légales
				- Politique de confidentialité
				- Respect du layout global (header / footer)
				- Pages statiques, HTML / CSS uniquement

		A) PAGES LEGALES
		----------------
			URLs :
				GET /legal
				GET /privacy

			Rôle :
				- Afficher les informations légales obligatoires
				- Pages publiques, sans authentification

		B) CONTROLEUR
		--------------
			Fichier :
				app/Controllers/PageController.php

			Méthodes :
				- legal()   → page Mentions légales
				- privacy() → page Politique de confidentialité

			Règle :
				- Aucune logique métier
				- Simple rendu de vues statiques

		C) VUES
		--------
			Dossier :
				views/pages/

			Fichiers :
				- legal.php
				- privacy.php

			Principe :
				- Structure HTML alignée avec les autres pages
				- Réutilisation des composants existants (titres, sections, wrappers)
				- Intégration CSS cohérente (typographie, espacements)

		D) INTEGRATION UI
		------------------
			Objectif :
				- Rendu visuel homogène avec le site
				- Utilisation du layout global (header/footer)
				- Pas de dépendance à une maquette Figma spécifique

			Règle :
				- HTML sémantique
				- Classes CSS réutilisables
				- Pas de logique PHP complexe

		E) ROUTES
		----------
			Fichier :
				app/Routes/web.php

			Routes utilisées :
				$router->get('/legal', [PageController::class, 'legal']);
				$router->get('/privacy', [PageController::class, 'privacy']);

		F) VERSIONING GIT / GITHUB
		--------------------------
			git status
			git add .
			git commit -m "feat(ui): integrate legal and privacy pages layout

			- Integrated legal and privacy pages UI
			- Reused global layout and components
			- Ensured visual consistency with existing pages
			- Static HTML/CSS only (no business logic)
			"

			git push origin feature/figma-legal-pages

			Sur GitHub :
				- Créer la Pull Request
				- Rédiger titre + description
				- Merger dans main
				- Supprimer la branche distante

			En local :
				git checkout main
				git pull
				git branch -d feature/figma-legal-pages
				git branch
				git branch -r

	9) FEATURE DETAIL D'UN LIVRE
	===========================

		BRANCHE
		-------
			git checkout -b feature/figma-book-detail
			# Nettoie les références distantes supprimées
			git fetch --prune
			git branch
			git branch -r

		OBJECTIF
		--------
			Intégrer fidèlement la page "Détail d’un livre" selon la maquette :
				- Mise en page claire et lisible
				- Responsive desktop / tablet / mobile
				- Valorisation du contenu du livre
				- Amélioration de l’expérience utilisateur

		A) PAGE DÉTAIL LIVRE (UI)
		-------------------------
			Fichiers :
				views/book/show.php
				public/assets/css/books.css (ou équivalent)

			Structure :
				- Layout 2 colonnes en desktop :
					• Image du livre
					• Informations + actions
				- Passage en colonne unique en mobile

		B) INTÉGRATION RESPONSIVE
		-------------------------
			Comportements :
				- Desktop : image et contenu côte à côte
				- Tablet : adaptation des espacements
				- Mobile : empilement vertical logique

			Règles :
				- Aucune régression fonctionnelle
				- Lisibilité conservée à toutes tailles

		C) AJUSTEMENTS UI
		-----------------
			Actions réalisées :
				- Alignement image / texte
				- Harmonisation des marges et espacements
				- Bouton d’action clairement visible
				- Cohérence visuelle avec les autres pages

		D) TESTS MANUELS
		----------------
			Vérifications :
				- Accéder à la page détail d’un livre
				- Redimensionner l’écran (desktop → mobile)
				- Vérifier :
					• Image
					• Texte
					• Bouton d’action
					• Absence de débordement ou cassure UI

		E) VERSIONING GIT / GITHUB
		--------------------------
			git status
			git add .
			git commit -m "feat(ui): integrate responsive book detail page"

			git push origin feature/figma-book-detail

			Sur GitHub :
				- Créer la Pull Request
				- Vérifier le rendu visuel
				- Merger dans main
				- Supprimer la branche distante

			En local :
				git checkout main
				git pull
				git branch -d feature/figma-book-detail
				git branch
				git branch -r


	10) FEATURE BIBLIOTHEQUE UTILISATEUR
	====================================

		BRANCHE
		-------
			git checkout -b feature/user-library
			# Nettoie les références distantes supprimées
			git fetch --prune
			git branch
			git branch -r

		OBJECTIF (À VENIR)
		------------------
			- Intégration Figma de la bibliothèque utilisateur
			- Mise en page responsive
